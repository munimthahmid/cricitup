{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <title>Cricitup &mdash; L2-T2 Database</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'cricitup/fonts/icomoon/style.css' %}">

  <link rel="stylesheet" href="{% static 'cricitup/css/bootstrap/bootstrap.css' %}"/>
  <link rel="stylesheet" href="{% static 'cricitup/css/jquery-ui.css' %}"/>
  <link rel="stylesheet" href="{% static 'cricitup/css/owl.carousel.min.css' %}"/>
  <link rel="stylesheet" href="{% static 'cricitup/css/owl.theme.default.min.css' %}"/>
  <link rel="stylesheet" href="{% static 'cricitup/css/owl.theme.default.min.css' %}"/>
  
  <link rel="stylesheet" href="{% static 'cricitup/css/jquery.fancybox.min.css' %}"/>
  
  <link rel="stylesheet" href="{% static 'cricitup/css/bootstrap-datepicker.css' %}"/>
  
  <link rel="stylesheet" href="{% static 'cricitup/fonts/flaticon/font/flaticon.css' %}"/>
  
  <link rel="stylesheet" href="{% static 'cricitup/css/aos.css' %}">
  
  <link rel="stylesheet" href="{% static 'cricitup/css/style.css' %}"/>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

</head>

<body>

  <div class="site-wrap">

    <div class="site-mobile-menu site-navbar-target">
      <div class="site-mobile-menu-header">
        <div class="site-mobile-menu-close">
          <span class="icon-close2 js-menu-toggle"></span>
        </div>
      </div>
      <div class="site-mobile-menu-body"></div>
    </div>

    <header class="site-navbar py-4" role="banner">
      <div class="container">
        <div class="d-flex align-items-center">
          <div class="site-logo">
            <a href="index.html">
              <img src="{% static 'cricitup/images/logo.png' %}" alt="Logo" class="small-logo round-logo"/> 
            </a>
          </div>
          <div class="ml-auto">
            <nav class="site-navigation position-relative text-right" role="navigation">
              <ul class="site-menu main-menu js-clone-nav mr-auto d-none d-lg-block">
                <li ><a href="{% url 'home' %}" class="nav-link">Home</a></li>
                <li ><a href="{% url 'players:players' %}" class="nav-link">Players</a></li>
                <!--- <li><a href="blog.html" class="nav-link">Blog</a></li>-->
                 <!--- <li><a href="contact.html" class="nav-link">Contact</a></li>-->
                <li ><a href="{% url 'grounds:grounds' %}" class="nav-link">Ground</a></li>
                <li ><a href="{% url 'coaches:coaches' %}" class="nav-link">Coaches</a></li>
                <li class="active"><a href="{% url 'umpires:umpires' %}" class="nav-link">Umpires</a></li>
                <li><a href="{% url 'teams:teams' %}" class="nav-link">Teams</a></li>
                <li><a href="{% url 'matches:matches' %}" class="nav-link">Matches</a></li>
                <li><a href="{% url 'dream11:make_your_dream11' %}" class="nav-link">Dream11</a></li>

              </ul>
            </nav>
            <a href="#" class="d-inline-block d-lg-none site-menu-toggle js-menu-toggle text-black float-right text-white">
              <span class="icon-menu h3 text-white"></span>
            </a>
          </div>
        </div>
      </div>
    </header>
    <style>
      
          .small-logo {
        width: 150px; /* Adjust the value to your desired width */
        height: 150; /* Automatically adjust the height based on the aspect ratio */
    }
    
    .site-logo {
        margin-right: 10px; /* Add some space between the logo and the navigation links */
    }
        /* Other styles... */
        
    
        .form-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 70vh; /* Adjust the height as needed */
            margin-top: 100px; /* Adjust the top margin as needed */
        }
    </style>
    <style>
        /* Your existing styles... */
        .content-container {
  margin-top: 140px; /* Adjust the value as needed to move the table down */
}
        .card-container {
          display: flex;
          flex-wrap: wrap;
          justify-content: space-between; /* Distribute cards horizontally */
          margin-top: 20px;
        }
    
  
        .card {
          border: 1px solid #ccc;
          padding: 15px;
          border-radius: 5px;
          box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.1);
          width: calc(30% - 20px); /* Adjust the width as needed */
          background-color: white;
          transition: transform 0.3s ease-in-out;
          display: flex;
          flex-direction: column;
          justify-content: space-between;
          margin-bottom: 20px;
        }
  
        .card-image {
          display: flex;
          justify-content: center;
          align-items: center;
          height: 150px; /* Adjust the height as needed */
        }
  
        .card-image img {
          max-width: 100%;
          max-height: 100%;
        }
  
        .card:hover {
          transform: translateY(-5px);
        }
        .player-image-cell
        {
          display: block;
          justify-content: center;
          align-items: center;
          height:150px;
        }
        .player-image-cell img
        {
          max-width: 100%;
          max-height: 100%;
        }
        .player-selection {
            max-height: 300px;
            overflow-y: scroll;
            border: 1px solid #ccc;
            padding: 10px;
        }

        /* Style for individual player items */
        .player-item {
            margin: 5px 0;
            padding: 5px;
            border: 1px solid #ddd;
            background-color: #f9f9f9;
            cursor: pointer;
        }

        /* Style for selected players */
        .selected-player {
            background-color: #3498db;
            color: #fff;
        }
        .scrollable-box {
            max-height: 200px; /* Adjust the maximum height as needed */
            overflow-y: auto;
            border: 1px solid #ccc;
        }
        #showStatsBtn {
  background-color: #007bff; /* Change the background color */
  color: white; /* Change the text color */
  border: none; /* Remove the border */
  padding: 10px 20px; /* Add padding to make the button larger */
  border-radius: 5px; /* Add rounded corners */
}

      </style>
    <!-- <section>
      <h1>Grounds</h1>

    </section> -->
      <section class="ftco-section">
        <div class="container">
          <div class="row justify-content-center">
            <!-- <div class="col-md-6 text-center mb-5"> -->
              <div class ="content-container">

              <h2 class="heading-section">Welcome To Dream11</h2>
              <input type="text" id="playerSearch" placeholder="Search players">
    
              <form id="playerForm" method="POST" action="{% url 'dream11:add_player_to_dream11' %}">
                {% csrf_token %}
                <!-- Loop through the players dictionary and generate checkboxes -->
                <div class="scrollable-box">
                    {% for player in players %}
                        <label>
                            <input type="checkbox" name="playerName" value="{{ player.5 }}"> {{ player.0 }}
                        </label><br>
                    {% endfor %}
                </div>
                <input type="submit" value="Add Selected Players">
            </form>
            {% if message %}
<div class="alert alert-danger">
    {{ message }}
</div>
{% endif %}
              {% if dream11players %}
              <div class="site-section">
                <div class="container">
                  <div class="row justify-content-center">
                    <div class="col-md-12">
                      <div align="center">
                      <h2 class="heading-section" >Dream11 Player Table</h2></div>
                      {%if counts %}
                      <h4 align="center">Current Player Count: {{counts}}</h4>
                      {%endif%}
                      <div class="table-responsive">
                        <table class="table table-bordered table-hover">
                            <thead>
                                <tr>
                                    <th>Player Image</th>
                                    <th>Name</th>
                                    <th>Nationality</th>
                                    <th>Player Type</th>
                                    <th>Age</th>
                                    <th>Actions</th> <!-- Add a new column for actions -->
                                </tr>
                            </thead>
                            <tbody>
                                {% for player in dream11players %}
                                <tr>
                                    <th class="player-image-cell" style="text-align: center;">
                                        <a href="{% url 'players:players_details' player_id=player.5 %}">
                                            <img src="{% if player.4 %}{% static 'cricitup/images/'|add:player.4 %}{% else %}{% static 'cricitup/images/default.jpg' %}{% endif %}" alt="{{ player.0 }}" class="player-image">
                                        </a>
                                    </th>
                                    <td><h5><b>{{ player.0 }}</b></h5></td>
                                    <td><h5>{{ player.1 }}</h5></td>
                                    <td><h5>{{ player.2 }}</h5></td>
                                    <td><h5>{{ player.3 }}</h5></td>
                                    <td>
                                        <button class="btn btn-danger" onclick="removePlayer('{{ player.5 }}')">Remove</button>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <div align="center">
                      <button id="resetTableBtn" onclick="restTable()" class="btn btn-primary" >Reset Table</button>
                    </div>
                    </div>
                  </div>
                </div>
              </div>
             
            {% if counts == 11 %}
            <div align="center" style="margin-top: 20px;"> <!-- Add margin-top to create space between buttons -->
              <button id="showStatsBtn" onclick="showStats()" class="btn btn-secondary">Get The Stats</button>
            </div>
            {% endif %}


            <div>
              {% if position%}
              <h1>Your Teams Virtual Rank is : {{position}}</h1>
              <h2>Batting Rating: {{dream11stats.0}}</h2>
              <h2>Bowling Rating: {{dream11stats.1}}</h2>
              <h2>Total Rating: {{dream11stats.2}}</h2>

              {%endif%}
            </div>



            </div>
            


              {%endif%}
      
      <!-- ... (Your script section remains unchanged) ... -->
      <script>
        document.addEventListener('DOMContentLoaded', function () {
            const playerForm = document.getElementById('playerForm');
        
            playerForm.addEventListener('submit', function (event) {
                event.preventDefault(); // Prevent form submission
        
                // Get all selected checkboxes
                const selectedCheckboxes = document.querySelectorAll('input[name="playerName"]:checked');
        
                // Create an array to store selected player names
                const selectedPlayerIds = [];
        
                // Iterate through selected players and add to the list
                selectedCheckboxes.forEach(function (checkbox) {
                    const playerId = checkbox.value;
                    selectedPlayerIds.push(playerId);
                });
        
                // Submit the form with selected player IDs
                playerForm.submit();
            });
        
            $(document).ready(function() {
                $("#playerSearch").on("keyup", function() {
                    var searchText = $(this).val().toLowerCase();
                    $(".scrollable-box label").each(function() {
                        var playerName = $(this).text().toLowerCase();
                        var checkbox = $(this).find("input[type=checkbox]");
                        
                        if (playerName.includes(searchText)) {
                            $(this).show();
                            checkbox.prop("disabled", false);
                        } else {
                            $(this).hide();
                            checkbox.prop("disabled", true);
                        }
                    });
                });
            });
        });

        function restTable()
        {
          const resetUrl="{% url 'dream11:reset_dream11' %}";
          window.location.href = resetUrl;

        }
        function removePlayer(playerId) {
    const resultUrl = `{% url 'dream11:removePlayer' playerId=0 %}`.replace('0', playerId);
    window.location.href = resultUrl;
}
    function showStats()
    {
      const resetUrl="{% url 'dream11:showStats' %}";
      window.location.href = resetUrl;


    }
    </script>
    
    </div>
  
    </section>
    

    <!-- .site-wrap -->
    <script src="{% static 'cricitup/js/jquery-3.3.1.min.js' %}"></script>
    <script src="{% static 'cricitup/js/jquery-migrate-3.0.1.min.js' %}"></script>
    <script src="{% static 'cricitup/js/jquery-ui.js' %}"></script>
    <script src="{% static 'cricitup/js/popper.min.js' %}"></script>
    <script src="{% static 'cricitup/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'cricitup/js/owl.carousel.min.js' %}"></script>
    <script src="{% static 'cricitup/js/jquery.stellar.min.js' %}"></script>
    <script src="{% static 'cricitup/js/jquery.countdown.min.js' %}"></script>
    <script src="{% static 'cricitup/js/bootstrap-datepicker.min.js' %}"></script>
    <script src="{% static 'cricitup/js/jquery.easing.1.3.js' %}"></script>
    <script src="{% static 'cricitup/js/aos.js' %}"></script>
    <script src="{% static 'cricitup/js/jquery.fancybox.min.js' %}"></script>
    <script src="{% static 'cricitup/js/jquery.sticky.js' %}"></script>
    <script src="{% static 'cricitup/js/jquery.mb.YTPlayer.min.js' %}"></script>
    <script src="{% static 'cricitup/js/jquery-3.3.1.min.js' %}"></script>
    <!-- ... (Rest of the scripts) ... -->

</body>

</html>
